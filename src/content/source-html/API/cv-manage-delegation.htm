<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" style="mc-template-page: url('..\Resources\_TopNav\cc_Inner_Swagger.flmsp');">
    <head>
    </head>
    <body>
        <h1>Workspace delegation operations</h1>
        <p>This section describes the API for conducting various operations relating to workspace delegation  in <MadCap:variable name="cc_product_vars.CV-full" />.</p>
        <div class="swagger-container">
            <p class="swagger-link">
                <a href="../YAML/workspace-delegation.json">Edit this hyperlink to point it to the desired swagger yaml file.</a>
            </p>
            <div id="swagger-ui">
                <p id="swagger-desc">Do not edit this text or remove the below script. Only use this snippet ONCE in a topic. Remember to apply the Swagger master page to the topic.</p>
            </div>
            <script>
				window.onload = function() {
				if (!window.jQuery) { return }
				var swaggerLink = $('.swagger-link a');
				var swaggerLink = swaggerLink.attr('href');
				const ui = SwaggerUIBundle({
				url: swaggerLink,
				dom_id: '#swagger-ui',
				presets: [
				SwaggerUIBundle.presets.apis,
				SwaggerUIStandalonePreset
				]
				})
				window.ui = ui
				}
			</script>
        </div>
        <h2>API examples</h2>
        <p>Here are some examples of the API in use.</p>
        <h3>/api/delegations/{cloudPlatform} -  add delegation</h3>
        <p>Request body</p>
        <div class="code">
            <pre>
                <code>{
    "workspaces": [
        {
            "workspace_type": "account",
            "workspace_id": "&lt;workspace-iD&gt;",
            "workspace_name": "Oded's account",
            "organization": "424213224699"
        }
    ],
    "identities": [
        {
            "identity_type": "User",
            "identity_id": "&lt;identity-ID&gt;",
            "identity_name": "Naveen",
            "directoryId": "&lt;directory-ID&gt;",
            "directoryName": "Company Cloud Directory",
            "identityEmail": "naveen@company.cloud.12345X",
            "serviceType": "CDS",
            "userPrincipal": "naveen@company.cloud.12345X"
        },
        {
            "identity_type": "Role",
            "identity_id": "&lt;identity-ID&gt;",
            "identity_name": "CEMUser",
            "userPrincipal": "CEMUser"
        }
    ]
}</code>
            </pre>
        </div>
        <h3>/api/delegations/owner/{Id} -  update delegation rule</h3>
        <p>Request body</p>
        <div class="code">
            <pre>
                <code>{
    "identities": [
        {
            "identity_type": "User",
            "entity_id": "&lt;identity-ID&gt;",
            "identity_name": "John Smith",
            "directoryId": "&lt;directory-ID&gt;",
            "directoryName": "Company Cloud Directory",
            "identityEmail": "john.smith@company.com",
            "serviceType": "CDS",
            "userPrincipal": "john@company.cloud.12345X”
        },
        {
            “identity_type”: “Role”,
            “identity_id”: “&lt;identity-ID&gt;”,
            “entity_name”: “CEMUser”,
            “userPrincipal”: “CEMUser”
        },
        {
            “identity_type”: “User”,
            “identity_id”: “&lt;identity-ID&gt;”,
            “identity_name”: “Naveen”,
            “directoryId”: “&lt;directory-ID&gt;”,
            “directoryName”: “Company Cloud Directory”,
            “identityEmail”: “Naveen@company.cloud.12345X",
            "serviceType": "CDS",
            "userPrincipal": "naveen@company.cloud.12345X"
        }
    ]
}</code>
            </pre>
        </div>
        <h3>/api/delegations/workspace/details - get delegation details</h3>
        <p>Request body</p>
        <div class="code">
            <pre>
                <code>{
    "id": 11,
    "cloudPlatform": "AWS",
    "workspaceType": "account",
    "workspaceId": "&lt;workspace-ID&gt;",
    "workspaceName": " Oded's account",
    "identities": [
        {
            "identityType": "User",
            "identityId": "&lt;identity-ID&gt;",
            "identityName": "John Smith",
            "directoryId": "&lt;directory-ID&gt;",
            "directoryName": "Company Cloud Directory",
            "identityEmail": "john.smith@company.com",
            "serviceType": "CDS",
            "userPrincipal": "john@company.cloud.12345X"
        }
    ]
}</code>
            </pre>
        </div>
        <h3>/api/delegations/workspace/export - export delegations</h3>
        <p>Request body</p>
        <div class="code">
            <pre>
                <code>{
    "filters": {
        "cloudPlatforms": [
            "AWS"
        ],
        "workspaceTypes": [
            "account"
        ]
    },
    "limit": 100
}</code>
            </pre>
        </div>
        <p>Alternative request body</p>
        <div class="code">
            <pre>
                <code>{
}</code>
            </pre>
        </div>
    </body>
</html>