<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../Resources/TableStyles/Standard.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h1>Create <MadCap:variable name="cc_product_vars.SCA-short" /> policies for cloud access</h1>
        <p>This section describes how to create an <MadCap:variable name="cc_product_vars.SCA-short" /> policy to grant users access to your cloud environments.</p>
        <p>When <MadCap:variable name="cc_product_vars.SCA-short" /> policies are implemented, users are assigned specific permissions to access cloud workspaces  during specific time frames, and for a defined session length.</p>
        <h2>Create policy wizard / Create Policy API</h2>
        <p>To create policy, you can use the:</p>
        <ul>
            <li>
                <p>Create policy wizard in the <MadCap:variable name="cc_product_vars.SCA-short" /> UI</p>
            </li>
            <li>
                <p> Create policy API</p>
            </li>
        </ul>
        <h3>Before you begin</h3>
        <p>Before you create policies make sure that your cloud structure is up to date in <MadCap:variable name="cc_product_vars.SCA-short" />.</p>
        <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/Standard.css');" class="TableStyle-Standard" cellspacing="0">
            <col class="TableStyle-Standard-Column-Column1" />
            <col class="TableStyle-Standard-Column-Column1" />
            <col class="TableStyle-Standard-Column-Column1" />
            <thead>
                <tr class="TableStyle-Standard-Head-Header1">
                    <th class="TableStyle-Standard-HeadE-Column1-Header1" colspan="2">
                        <p>Step</p>
                    </th>
                    <th class="TableStyle-Standard-HeadD-Column1-Header1">
                        <p>Description</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p>1</p>
                    </td>
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p>Onboard and discover cloud workspaces in <MadCap:variable name="cc_product_vars.CEM-short" /></p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Before you create a policy make sure that the workspaces you want to set up policies for have been onboarded in <MadCap:variable name="cc_product_vars.CEM-short" />. </p>
                        <p>Once a day, <MadCap:variable name="cc_product_vars.CEM-short" /> runs a scheduled discovery to detect any changes to the structure of your cloud environments, for example, new or deleted accounts in an onboarded AWS organization.</p>
                        <p>If you have recently made changes to the cloud structure and want to create policies based on this change but don't want to wait for the scheduled daily discovery, you can manually run an on-demand discovery using <MadCap:variable name="cc_product_vars.SCA-short" />'s Discovery API (<code>/policies/discovery/</code>).</p>
                        <p>For more information about onboarding workspaces, see:</p>
                        <ul>
                            <li>
                                <p>
                                    <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm">Add AWS</MadCap:xref>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <MadCap:xref href="../CloudAdmin/cv-onboard-azure.htm">Add Azure - [%=cv-shared-variables.entra-id-long%]</MadCap:xref>
                                </p>
                            </li>
                            <li>
                                <p>
                                    <MadCap:xref href="../CloudAdmin/cv-gcp-discovery.htm">Add Google Cloud</MadCap:xref>
                                </p>
                            </li>
                        </ul>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyB-Column1-Body1">
                        <p>2</p>
                    </td>
                    <td class="TableStyle-Standard-BodyB-Column1-Body1">
                        <p>Scan workspaces from <MadCap:variable name="cc_product_vars.SCA-short" /></p>
                    </td>
                    <td class="TableStyle-Standard-BodyA-Column1-Body1">
                        <p>For cloud workspaces that are onboarded to <MadCap:variable name="cc_product_vars.CEM-short" />, <MadCap:variable name="cc_product_vars.SCA-short" /> runs scheduled scans twice a day directly on your cloud environments for roles and permissions, and in the case of <MadCap:variable name="cv-shared-variables.entra-id-long" /> ), for Azure resources (resource groups, and resources).</p>
                        <p>If you don't want to wait for the scheduled scans, you can manually run on-demand scans directly from the Create policy wizard interface or using the <a href="../Automation/sca-API-cloud.htm">Rescan API (<code>/cloud/rescan</code>).</a></p>
                        <div class="tip">
                            <p>When you use the <MadCap:variable name="cc_product_vars.SCA-short" /> API, you can select which workspaces to scan.</p>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>For more information about creating access policies for each of your cloud environments, see:</p>
        <ul>
            <li>
                <p>
                    <MadCap:xref href="sca_create-policies-AWS.htm">Create policies for [%=sca-project-variables.AWS-IAM%] and [%=sca-project-variables.AWS-AD%] access</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="sca_create-policies-Azure.htm">Create policies for Azure resources and [%=cv-shared-variables.entra-id-long%] directories</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="sca_create-policies-GCP.htm">Create policies for [%=sca-project-variables.GoogleCloud%] access</MadCap:xref>
                </p>
            </li>
        </ul>
        <h2>View access policies</h2>
        <p>The Access policies page contains a table where you can view all the <MadCap:variable name="cc_product_vars.SCA-short" /> policies that exist for your cloud environment. You can filter the table according to cloud provider, policy type (pre-defined or on-demand), and the current status of the policy. You can also search for a specific policy using free text.</p>
        <p>The access policy table includes the following information:</p>
        <table style="caption-side: top;mc-table-style: url('../Resources/TableStyles/Standard.css');" class="TableStyle-Standard" cellspacing="0" summary="Table that describes the information in the access policy table">
            <caption>Access policy view</caption>
            <col class="TableStyle-Standard-Column-Column1" />
            <col class="TableStyle-Standard-Column-Column1" />
            <thead>
                <tr class="TableStyle-Standard-Head-Header1">
                    <th class="TableStyle-Standard-HeadE-Column1-Header1">
                        <p>Column</p>
                    </th>
                    <th class="TableStyle-Standard-HeadD-Column1-Header1">
                        <p>Description</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Policy</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Name of the policy, along with an icon that indicates the type (you can filter the table on policy type):</p>
                        <ul>
                            <li>
                                <p><span class="Emphasis">Pre-defined policy </span>-  created manually by a user to address specific use cases</p>
                            </li>
                            <li>
                                <p><span class="Emphasis">On-demand policy</span>- created automatically by <MadCap:variable name="cc_product_vars.SCA-short" /> upon approval of an access request, and is deleted when the access window of the requested session expires</p>
                            </li>
                        </ul>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Status</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Current status of the access policy:</p>
                        <p><span class="Emphasis">Active </span>- currently active and providing the defined permissions for identities that match </p>
                        <p MadCap:conditions="cc_C_CyberArk.Removed"><span class="Emphasis">Suspended </span>- already started but isn't currently active because it was paused by an admin (removed for DOC-15964)</p>
                        <p><span class="Emphasis">Expired </span>- isn't currently active because the end date has passed</p>
                        <p><span class="Emphasis">Validating </span>- has been defined and is being verified by <MadCap:variable name="cc_product_vars.SCA-short" />, so isn't yet available</p>
                        <p><span class="Emphasis">Error</span> - was defined but failed the validation process</p>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Cloud provider</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Cloud provider and workspace type</p>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Entitlements</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Number of cloud roles or permission sets that match the policy definition</p>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Last updated on</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Date and time that the policy was last modified</p>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p><span class="Emphasis">Created by</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>Username of the identity that created the policy or approved the access request.</p>
                        <div class="note">
                            <p>If the policy type is <span class="Emphasis">On-demand</span>, this table cell is empty.</p>
                        </div>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyB-Column1-Body1">
                        <p><span class="Emphasis">Description</span>
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyA-Column1-Body1">
                        <p>For pre-defined policies, if the user added a description it appears here.</p>
                        <p>For on-demand policies, the request details appear in the format "<span class="Emphasis">&lt;username&gt; requested access to &lt;cloud provider&gt; on &lt;dd Month yyyy&gt;</span>"; for example, <span class="Emphasis">john.doe@somecompany.com requested on-demand elevated access to Google Cloud on <MadCap:variable name="cc_C_CyberArk.HTML5-Updated" /></span>.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Export policy details</h2>
        <p>You can export the details of a policy in JSON format. In the Access policies page, click the <span class="Emphasis">More options </span>menu for the policy you want to export, and select <span class="Emphasis">Download policy details</span>. The JSON file is downloaded to your default Downloads folder.</p>
        <h2>Validate a policy</h2>
        <p>If you make changes to your cloud environment, you can run a validation process per policy to see if it was affected by those changes. In the Access policies page, click the <span class="Emphasis">More options </span>menu for the policy you want to validate, and select <span class="Emphasis">Validate policy</span>. The validation process runs in the background, and if problems are discovered then the policy status changes to <span class="Emphasis">Error</span>.</p>
        <p>The validation process checks the workspace and roles associated with the policy, the web app configuration, and the trust configuration between the IdP&#160;and the cloud provider.</p>
        <p>If you make further changes to your cloud environment in order to fix errors, validate the policy again.</p>
        <div>
            <h2><a name="Delegate"></a>Delegated workspaces</h2>
            <p>The cloud services administrator has full administrator privileges for all policies in the organization, meaning they can create, update, and delete policies as necessary.</p>
            <p>When a workspace is delegated, the delegate is automatically assigned an <MadCap:variable name="cc_product_vars.SCA-short" /> administrator role in <MadCap:variable name="cc_product_vars.Identity-full" /> that enables them to view and update policies for the workspaces they are assigned.</p>
            <p>Workspace delegation is configured in <MadCap:variable name="cc_product_vars.CEM-short" />. For more information about how to delegate workspaces, see <a href="/cs-cem/latest/en/content/cloudadmin/cv-delegation.htm" target="_blank" alt="[%=cc_product_vars.CEM-short%] topic on how to configure workspace delegation">Manage workspace delegation</a>.</p>
            <p>For more information about service roles in <MadCap:variable name="cc_product_vars.Identity-full" />, see <a target="_blank" href="/identity-administration/latest/en/content/coreservices/getstarted/ispss-user-roles.htm">[%=cc_product_vars.ISP-short%] user roles</a>.</p>
            <p>If your organization uses workspace delegation to assign administrator permissions to workspaces, there may be identities that don't have permissions under some policies, or that have permissions for only some of the workspaces that match a policy. Additionally, identities may have varying levels of permissions (view or edit) under some policies, or in different workspaces that match a policy.</p>
            <p>If you are a delegate, the Access policies page displays only those policies that you can view or edit. By default, you can see only policies that you can edit. To see all policies that give you at least partial or view permissions to workspaces, disable the <span class="Emphasis">Policies I can edit</span> option above the table.</p>
            <div class="note">
                <p>Delegates can only see the cloud roles that are attached to the workspaces they have permissions to view or edit.</p>
            </div>
        </div>
        <p>To trigger a <MadCap:variable name="cc_product_vars.CEM-short" /> discovery, see:</p>
        <ul>
            <li>
                <p>
                    <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm">Add AWS</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="../CloudAdmin/cv-onboard-azure.htm">Add Azure - [%=cv-shared-variables.entra-id-long%]</MadCap:xref>
                </p>
            </li>
            <li>
                <p>
                    <MadCap:xref href="../CloudAdmin/cv-gcp-discovery.htm">Add Google Cloud</MadCap:xref>
                </p>
            </li>
        </ul>
    </body>
</html>