<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../Resources/TableStyles/Standard.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h1>Create a web app for AWS</h1>
        <p>This topic describes how to add web apps for single <MadCap:variable name="sca-project-variables.AWS-IAM" /> accounts, <MadCap:variable name="sca-project-variables.AWS-IAM" /> organizations, and <MadCap:variable name="sca-project-variables.AWS-AD" /> organizations to enable access from <MadCap:variable name="cc_product_vars.Identity-full" />.</p>
        <div class="important">
            <p>This topic assumes that your AWS workspace has been onboarded to <MadCap:variable name="cc_product_vars.CEM-short" />. For details, see <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm">Add AWS</MadCap:xref>.</p>
        </div>
        <h2>Special considerations for <MadCap:variable name="sca-project-variables.AWS-AD" /></h2>
        <p>If you are creating one or more web apps for <MadCap:variable name="sca-project-variables.AWS-AD" />, take the following issues into consideration when planning which IdP to use with the <MadCap:variable name="cc_product_vars.Identity-full" /> web apps.</p>
        <ul>
            <li>
                <p><span class="Emphasis">Active Directory</span>:&#160;If you intend to switch your IdP&#160;to or from Active Directory, this will affect any users and groups you configured in AWS. For more information, see the <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/manage-your-identity-source-considerations.html#changing-between-microsoft-ad-and-azure-active-directory" target="_blank" alt="link to AWS documentation about considerations for changing IdP to or from AD ">AWS docs</a>.</p>
            </li>
        </ul>
        <ul>
            <li>
                <p><span class="Emphasis">Permission set behavior:</span> <MadCap:variable name="cc_product_vars.SCA-short" /> enforces zero standing permissions, which involves dynamically assigning and revoking permissions to the AWS cloud console. This might directly affect AWS reserved roles (AWSReserved roles), which are dynamically managed by AWS behind the scenes. For more information, see the <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/referencingpermissionsets.html">AWS&#160;docs</a>.</p>
                <p>If your organization explicitly uses AWS reserved roles for other purposes, we recommend contacting CyberArk support to prevent potential deletion of these roles.</p>
            </li>
        </ul>
        <h2><a name="Configur"></a>Create a web app for an AWS workspace</h2>
        <p>Create web apps for AWS accounts, <MadCap:variable name="sca-project-variables.AWS-AD" />, and AWS organization (without IAM&#160;Identity Center).</p>
        <h3><a name="Before"></a>Before you begin</h3>
        <ul>
            <li>
                <p>This topic assumes that your AWS workspace has been onboarded to <MadCap:variable name="cc_product_vars.CEM-short" />. For details, see <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm">Add AWS</MadCap:xref>.</p>
            </li>
            <li>
                <p>To access your cloud workspace through your web app, trust must be established between <MadCap:variable name="cc_product_vars.Identity-full" /> and AWS. </p>
                <ul>
                    <li>
                        <p>For <MadCap:variable name="sca-project-variables.AWS-AD" />, this trust needs to be configured manually after you create the web app.</p>
                    </li>
                    <li>
                        <p>For AWS standalone accounts and organizations, trust can be configured one of the following ways:</p>
                        <ul>
                            <li>
                                <p><MadCap:variable name="cc_product_vars.SCA-short" /> can automatically configure trust for you when it creates the web app</p>
                            </li>
                            <li>
                                <p> Configure trust manually in <MadCap:variable name="cc_product_vars.Identity-full" /></p>
                            </li>
                        </ul>
                        <p>When you onboard accounts in <MadCap:variable name="cc_product_vars.CEM-short" />, the <span class="Emphasis">CyberArkRoleSCA_{UUID}</span> role that is added to your accounts includes the <span class="Emphasis">iam:CreateSAMLProvider</span> permission which enables this feature.</p>
                        <div class="important">
                            <ul>
                                <li>
                                    <p>The <span class="Emphasis">iam:CreateSAMLProvider</span> permission is included with accounts that were onboarded to <MadCap:variable name="cc_product_vars.CEM-short" /> from August 6, 2024. </p>
                                </li>
                                <li>
                                    <p><span class="Emphasis">If you are not sure when your account was onboarded to <MadCap:variable name="cc_product_vars.CEM-short" /></span>, go to the AWS&#160;account's <span class="Emphasis">CyberArkRoleSCA_{UUID}</span> role, and check that the <span class="Emphasis">CyberArkPolicyAccountForSCA&lt;ACCOUNT_ID&gt;</span> policy includes the .<span class="Emphasis">iam:CreateSAMLProvider</span> permission.</p>
                                    <p>If this permission doesn't appear, you need to add the permission manually as described in <MadCap:xref href="../Troubleshooting/sca-missing-permission.htm#Auto-tru">Auto-trust between [%=cc_product_vars.SCA-short%] and AWS</MadCap:xref>.</p>
                                </li>
                                <li>
                                    <p>For AWS organizations, the <span class="Emphasis">CyberArkRoleSCA_{UUID}</span> role for each account in the organization must include this <span class="Emphasis">iam:CreateSAMLProvider</span> permission.</p>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </li>
        </ul>
        <p>You can create web apps for an AWS workspace in one of the following ways:</p>
        <table style="width: 100%;caption-side: top;mc-table-style: url('../Resources/TableStyles/Standard.css');" class="TableStyle-Standard" cellspacing="0">
            <col class="TableStyle-Standard-Column-Column1" />
            <col class="TableStyle-Standard-Column-Column1" />
            <thead>
                <tr class="TableStyle-Standard-Head-Header1">
                    <th class="TableStyle-Standard-HeadE-Column1-Header1">
                        <p>Option</p>
                    </th>
                    <th class="TableStyle-Standard-HeadD-Column1-Header1">
                        <p>Description</p>
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyE-Column1-Body1">
                        <p>SCA (simplified)</p>
                    </td>
                    <td class="TableStyle-Standard-BodyD-Column1-Body1">
                        <p>In <MadCap:variable name="cc_product_vars.SCA-short" />, you provide a few details about the AWS workspace, and <MadCap:variable name="cc_product_vars.SCA-short" /> automatically creates and configures the web app for you.</p>
                        <div class="note">
                            <p>Depending on your selections during this process, you may need to configure a few more things.</p>
                        </div>
                    </td>
                </tr>
                <tr class="TableStyle-Standard-Body-Body1">
                    <td class="TableStyle-Standard-BodyB-Column1-Body1">
                        <p><MadCap:variable name="cc_product_vars.IdentityAdmin-full" />
                        </p>
                    </td>
                    <td class="TableStyle-Standard-BodyA-Column1-Body1">
                        <p> In <MadCap:variable name="cc_product_vars.IdentityAdmin-full"></MadCap:variable>, you create and configure the web app from scratch.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="tabs">
            <ul class="tabs-nav">
                <li class="tab-active"><a data-cc-tab=".tab-1">SCA&#160;(simplified)</a>
                </li>
                <li><a data-cc-tab=".tab-2"><MadCap:variable name="cc_product_vars.IdentityAdmin-full" /></a>
                </li>
            </ul>
            <div class="tabs-stage">
                <div class="tab-1">
                    <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 1 Content - SCA</p>
                    <p>This section describes how to use <MadCap:variable name="cc_product_vars.SCA-short" /> to create a web app in <MadCap:variable name="cc_product_vars.Identity-full" /> for your AWS workspace.</p>
                    <div class="tabs">
                        <ul class="tabs-nav">
                            <li class="tab-active"><a data-cc-tab=".tab-1">AWS standalone account</a>
                            </li>
                            <li><a data-cc-tab=".tab-2"><MadCap:variable name="sca-project-variables.AWS-AD" /></a>
                            </li>
                            <li><a data-cc-tab=".tab-3">AWS organization</a>
                            </li>
                        </ul>
                        <div class="tabs-stage">
                            <div class="tab-1">
                                <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 1 Content - <MadCap:variable name="sca-project-variables.AWS-IAM" /> single</p>
                                <ol>
                                    <li>
                                        <p><span class="Emphasis">Create the web app</span>
                                        </p>
                                        <div MadCap:conditions="SCA-conditions.not-free-trial">
                                            <div class="wistia_wrapper">
                                                <p style="visibility: hidden;" class="wistia_id">rv05ez3c5i</p>
                                                <div class="wistia_embed">
                                                </div>
                                            </div>
                                        </div>
                                        <ol>
                                            <li>
                                                <p>Make sure you have the AWS account ID available. This is the 12-digit AWS account ID that was used when the account was onboarded in <MadCap:variable name="cc_product_vars.CEM-short" />.</p>
                                            </li>
                                            <li>
                                                <p MadCap:conditions="SCA-conditions.not-free-trial">In <MadCap:variable name="cc_product_vars.SCA-short" />, go to the Introduction page.</p>
                                                <p MadCap:conditions="SCA-conditions.free-trial">In the <MadCap:variable name="cc_C_CyberArk.CompanyName" /> Admin portal, select <span class="Emphasis">Cloud connectivity &gt; Configure cloud provider apps</span>.</p>
                                            </li>
                                            <li MadCap:conditions="SCA-conditions.not-free-trial">
                                                <p>In the second tile, click <span class="Emphasis">+ Create a web app</span>.</p>
                                            </li>
                                            <li>
                                                <p>In the dialog box that opens click <span class="Emphasis">AWS standalone account</span>, and click <span class="Emphasis">Next</span>.</p>
                                            </li>
                                            <li>
                                                <p>Enter the following details:</p>
                                                <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/Standard.css');" class="TableStyle-Standard" cellspacing="0">
                                                    <col class="TableStyle-Standard-Column-Column1" />
                                                    <col class="TableStyle-Standard-Column-Column1" />
                                                    <thead>
                                                        <tr class="TableStyle-Standard-Head-Header1">
                                                            <th class="TableStyle-Standard-HeadE-Column1-Header1">
                                                                <p>Field</p>
                                                            </th>
                                                            <th class="TableStyle-Standard-HeadD-Column1-Header1">
                                                                <p>Description</p>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-Standard-Body-Body1">
                                                            <td class="TableStyle-Standard-BodyE-Column1-Body1">
                                                                <p>Web app name</p>
                                                            </td>
                                                            <td class="TableStyle-Standard-BodyD-Column1-Body1">
                                                                <p>Give the web app a name (up to 50 characters) that will help you identify it in <MadCap:variable name="cc_product_vars.Identity-full" />.</p>
                                                                <p><span class="Emphasis">Default:</span> Amazon Web Services (AWS) Console</p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-Standard-Body-Body1">
                                                            <td class="TableStyle-Standard-BodyB-Column1-Body1">
                                                                <p>AWS account ID</p>
                                                            </td>
                                                            <td class="TableStyle-Standard-BodyA-Column1-Body1">
                                                                <p> The 12-digit AWS account ID that was used when the account was onboarded in <MadCap:variable name="cc_product_vars.CEM-short" />.</p>
                                                                <div class="important">
                                                                    <p>Make sure that the number you provide here is correct. If not, the web app won't be created.</p>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </li>
                                            <li>
                                                <p>Under <span class="Emphasis">Trust</span>, select how you want to set up trust between  <MadCap:variable name="cc_product_vars.Identity-full" /> (the identity provider) and AWS:</p>
                                                <ul>
                                                    <li>
                                                        <p><span class="Emphasis">Configure trust automatically</span> - When the web app is created, <MadCap:variable name="cc_product_vars.SCA-short" /> automatically configures the trust settings.</p>
                                                        <div class="important">
                                                            <ul>
                                                                <li>
                                                                    <p>This option requires that the account's <span class="Emphasis">CyberArkRoleSCA_{UUID}</span> role includes the <span class="Emphasis">iam:CreateSAMLProvider</span> permission. See <MadCap:xref href="#Before">Before you begin</MadCap:xref>.</p>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <p><span class="Emphasis">I want to configure trust manually in CyberArk Identity</span> - After the web app is created, you can manually configure the trust settings.</p>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>Click <span class="Emphasis">Create</span>.</p>
                                                <div class="note">
                                                    <ul>
                                                        <li>
                                                            <p>Before creating the web app, <MadCap:variable name="cc_product_vars.SCA-short" /> validates the account ID. This may take some time. </p>
                                                        </li>
                                                        <li>
                                                            <p>Once the web app is created, it's listed in the <MadCap:conditionalText MadCap:conditions="SCA-conditions.free-trial">Cloud provider applications page</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SCA-conditions.not-free-trial">Web Apps page in <MadCap:variable name="cc_product_vars.IdentityAdmin-full" /></MadCap:conditionalText>, and you can create policies in <MadCap:variable name="cc_product_vars.SCA-short" />.</p>
                                                            <p><span class="Emphasis">Note: </span>If you chose to configure trust manually, an asynchronous discovery of your onboarded workspaces is triggered to identify changes in your cloud structure. This may take some time. In this case, we recommend that you wait for the discovery process to complete before creating policies in <MadCap:variable name="cc_product_vars.SCA-short" />.</p>
                                                        </li>
                                                        <li>
                                                            <p><span class="Emphasis">Trust:</span>
                                                            </p>
                                                            <ul>
                                                                <li>
                                                                    <p>If you selected the <span class="Emphasis">Configure trust automatically</span> option above, check the <span class="Emphasis">Service data</span> events in the <MadCap:variable name="cc_product_vars.Audit-short" /> service to make sure that trust was established successfully. For more details, see the <a href="/audit/latest/en/content/audit/product-audits/isp-sca-audit.htm" alt="Link to the Audit documentation in the docs portal" title="Link to the Audit documentation in the docs portal">Audit docs</a>.</p>
                                                                    <p>If trust wasn't established, users with access won't be able to connect to the accounts from their <MadCap:conditionalText MadCap:conditions="SCA-conditions.not-free-trial"><MadCap:variable name="cc_C_CyberArk.CompanyName" /> user portal</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SCA-conditions.free-trial"><MadCap:variable name="cc_product_vars.SecureAccessSpace" /> space</MadCap:conditionalText>. Follow the instructions in the audit event to resolve the issue.</p>
                                                                </li>
                                                                <li>
                                                                    <p>If you selected <span class="Emphasis">I want to configure trust manually in <MadCap:variable name="cc_product_vars.Identity-full" /></span>, continue with <MadCap:xref href="#sca-configure-trust-manually">Configure trust between [%=cc_product_vars.Identity-full%] and [%=sca-project-variables.AWS-IAM%]  manually</MadCap:xref>. </p>
                                                                    <p>This triggers an asynchronous discovery of your onboarded workspaces to identify changes in your cloud structure. This may take some time. We recommend that you wait for this process to complete before creating policies in <MadCap:variable name="cc_product_vars.SCA-short" />.</p>
                                                                </li>
                                                            </ul>
                                                        </li>
                                                        <li>
                                                            <MadCap:snippetBlock src="SCA-snippets/ready-to-deploy.flsnp" />
                                                        </li>
                                                    </ul>
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        <p><span class="Emphasis"><a name="sca-configure-trust-manually"></a>Configure trust between <MadCap:variable name="cc_product_vars.Identity-full" /> and AWS  manually</span>
                                        </p>
                                        <div class="note">
                                            <p>Do this step if either of the following is true:</p>
                                            <ul>
                                                <li>
                                                    <p>You selected <span class="Emphasis">I want to configure trust manually in <MadCap:variable name="cc_product_vars.Identity-full" /></span> in the previous step</p>
                                                </li>
                                                <li>
                                                    <p>You selected <span class="Emphasis">Configure trust automatically</span> in the previous step, but the Service data audit event shows that trust was not established and instructs you to configure trust manually</p>
                                                </li>
                                            </ul>
                                        </div>
                                        <p>
                                            <MadCap:snippetBlock src="../CloudAdmin/CloudAdminSnippets/aws-single-trust.flsnp" />
                                        </p>
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Enable <MadCap:variable name="cc_product_vars.SWS-full" /> (Optional)</span>
                                        </p>
                                        <MadCap:snippetBlock src="SCA-snippets/enable-sws-intro.flsnp" />
                                        <MadCap:snippetBlock src="SCA-snippets/EnableSWS.flsnp" />
                                    </li>
                                </ol>
                            </div>
                            <div class="tab-2">
                                <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 2 Content - <MadCap:variable name="sca-project-variables.AWS-AD" /></p>
                                <ol>
                                    <li>
                                        <p><span class="Emphasis">Create the web app</span>
                                        </p>
                                        <div MadCap:conditions="SCA-conditions.not-free-trial">
                                            <div class="wistia_wrapper">
                                                <p style="visibility: hidden;" class="wistia_id">a1w5sr7dqp</p>
                                                <div class="wistia_embed">
                                                </div>
                                            </div>
                                        </div>
                                        <ol>
                                            <li>
                                                <p MadCap:conditions="SCA-conditions.not-free-trial">In <MadCap:variable name="cc_product_vars.SCA-short"></MadCap:variable>, go to the Introduction page.</p>
                                                <p MadCap:conditions="SCA-conditions.free-trial">In the <MadCap:variable name="cc_C_CyberArk.CompanyName" /> Admin portal, select <span class="Emphasis">Cloud connectivity &gt; Configure cloud provider apps</span>.</p>
                                            </li>
                                            <li MadCap:conditions="SCA-conditions.not-free-trial">
                                                <p>In the second tile, click <span class="Emphasis">+ Create a web app</span>.</p>
                                            </li>
                                            <li>
                                                <p>In the dialog box that opens click <span class="Emphasis">AWS organization (with IAM&#160;Identity Center</span>), and click <span class="Emphasis">Next</span>.</p>
                                            </li>
                                            <li>
                                                <p>Provide the following details:</p>
                                                <table style="width: 100%;mc-table-style: url('../Resources/TableStyles/Standard.css');" class="TableStyle-Standard" cellspacing="0">
                                                    <col style="width: 50%;" class="TableStyle-Standard-Column-Column1" />
                                                    <col style="width: 50%;" class="TableStyle-Standard-Column-Column1" />
                                                    <thead>
                                                        <tr class="TableStyle-Standard-Head-Header1">
                                                            <th class="TableStyle-Standard-HeadE-Column1-Header1">
                                                                <p>Field</p>
                                                            </th>
                                                            <th class="TableStyle-Standard-HeadD-Column1-Header1">
                                                                <p>Description</p>
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="TableStyle-Standard-Body-Body1">
                                                            <td class="TableStyle-Standard-BodyE-Column1-Body1">
                                                                <p>Web app name</p>
                                                            </td>
                                                            <td class="TableStyle-Standard-BodyD-Column1-Body1">
                                                                <p>Give the web app a name (up to 50 characters) that will help you identify it in <MadCap:variable name="cc_product_vars.Identity-full" />.</p>
                                                                <p><span class="Emphasis">Default:</span><MadCap:variable name="sca-project-variables.AWS-AD" />
                                                                </p>
                                                            </td>
                                                        </tr>
                                                        <tr class="TableStyle-Standard-Body-Body1">
                                                            <td class="TableStyle-Standard-BodyB-Column1-Body1">
                                                                <p>Organization</p>
                                                            </td>
                                                            <td class="TableStyle-Standard-BodyA-Column1-Body1">
                                                                <p>Select the <MadCap:variable name="sca-project-variables.AWS-AD" /> organization from the dropdown list.</p>
                                                                <div class="note">
                                                                    <ul>
                                                                        <li>
                                                                            <p>It may take some time for the organizations to display.</p>
                                                                        </li>
                                                                        <li>
                                                                            <p>If your organization doesn't appear, this means that it hasn't been onboarded to <MadCap:variable name="cc_product_vars.CEM-short" />. For details about onboarding the organization, see <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm#Discover">Discover a new AWS organization</MadCap:xref>.</p>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </li>
                                            <li>
                                                <p><span class="Emphasis">Use <MadCap:variable name="cc_product_vars.Identity-full" /> as an external IdP</span>: Select this option if you want to use <MadCap:variable name="cc_product_vars.Identity-full" /> as an external IdP for your users.</p>
                                                <div class="important">
                                                    <p>Make sure also to define <MadCap:variable name="cc_product_vars.Identity-full" /> as the identity provider in <MadCap:variable name="sca-project-variables.AWS-AD" />,.</p>
                                                </div>
                                            </li>
                                            <li>
                                                <p>Click <span class="Emphasis">Create</span>. The web app for the <MadCap:variable name="sca-project-variables.AWS-AD" /> organization is created in <MadCap:variable name="cc_product_vars.Identity-full" />.</p>
                                                <MadCap:snippetBlock src="SCA-snippets/asynch-discovery-in-background.flsnp" />
                                                <p>Along with a web app, a custom role is created <MadCap:variable name="cc_product_vars.Identity-full" /> in the following format: <span class="Emphasis">AWS_SCA_&lt;management account ID&gt;</span>. Provisioned users get access to this web app by means of this role.</p>
                                                <div class="note">
                                                    <MadCap:snippetBlock src="SCA-snippets/ready-to-deploy.flsnp" />
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li MadCap:conditions="cc_C_CyberArk.Removed">
                                        <p><span class="Emphasis">Create a custom role for provisioned users</span>
                                        </p>
                                        <p>Create a custom role for provisioned users to assume so that they can access the <MadCap:variable name="sca-project-variables.AWS-AD" /> workspace. </p>
                                        <p>To create this custom role, under <span class="Emphasis">Core Services </span>&gt; <span class="Emphasis">Roles</span>, create a custom role in the format <span class="Emphasis">AWS_SCA_&lt;management account ID&gt;</span>. For example, <span class="Emphasis">AWS_SCA_1111111</span>.</p>
                                        <div class="important">
                                            <p>Users must either be created directly in <MadCap:variable name="sca-project-variables.AWS-AD" />, or provisioned from <MadCap:variable name="cc_product_vars.Identity-full" /> or another IdP. For information on how to provision users in AWS, see the <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/scim-profile-saml.html" target="_blank" alt="link to AWS documentation on automatic and manual user provisioning">AWS&#160;docs</a>.</p>
                                        </div>
                                        <div class="note">
                                            <ul>
                                                <li>
                                                    <p>Each <MadCap:variable name="sca-project-variables.AWS-AD" /> web app must have its own custom role</p>
                                                </li>
                                                <li>
                                                    <p>For more information about creating custom roles, see the <a href="/identity/latest/en/content/coreservices/getstarted/create-roles.htm" target="_blank" alt="[%=cc_product_vars.Identity-full%] topic on how to create custom roles"><MadCap:variable name="cc_product_vars.Identity-full" /> docs</a>.</p>
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Configure the IdP - required only if you are using <MadCap:variable name="cc_product_vars.Identity-full"></MadCap:variable> as your external IdP</span>
                                        </p>
                                        <p>If your organization is using <MadCap:variable name="cc_product_vars.Identity-full"></MadCap:variable> as its external IdP, you need to set up trust between <MadCap:variable name="cc_product_vars.Identity-full"></MadCap:variable> and <MadCap:variable name="sca-project-variables.AWS-AD"></MadCap:variable>.</p>
                                        <p><span class="Emphasis">In <MadCap:variable name="cc_product_vars.IdentityAdmin-full"></MadCap:variable>:</span>
                                        </p>
                                        <MadCap:snippetBlock src="SCA-snippets/AWS-idc-trust.flsnp" />
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Enable <MadCap:variable name="cc_product_vars.SWS-full" /> (Optional)</span>
                                        </p>
                                        <MadCap:snippetBlock src="SCA-snippets/enable-sws-intro.flsnp" />
                                        <MadCap:snippetBlock src="SCA-snippets/EnableSWS.flsnp" />
                                    </li>
                                </ol>
                            </div>
                            <div class="tab-3">
                                <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 3 Content - aws organization</p>
                                <ol>
                                    <li>
                                        <p><span class="Emphasis">Create web apps for all the accounts in the organization</span>
                                        </p>
                                        <div MadCap:conditions="SCA-conditions.not-free-trial">
                                            <div class="wistia_wrapper">
                                                <p style="visibility: hidden;" class="wistia_id">zn85nwmono</p>
                                                <div class="wistia_embed">
                                                </div>
                                            </div>
                                        </div>
                                        <ol>
                                            <li>
                                                <p MadCap:conditions="SCA-conditions.not-free-trial">In <MadCap:variable name="cc_product_vars.SCA-short" />, go to the Introduction page.</p>
                                                <p MadCap:conditions="SCA-conditions.free-trial">In the <MadCap:variable name="cc_C_CyberArk.CompanyName" /> Admin portal, select <span class="Emphasis">Cloud connectivity &gt; Configure cloud provider apps</span>.</p>
                                            </li>
                                            <li MadCap:conditions="SCA-conditions.not-free-trial">
                                                <p>In the second tile, click <span class="Emphasis">+ Create a web app</span>.</p>
                                            </li>
                                            <li>
                                                <p>In the dialog box that opens click <span class="Emphasis">AWS organization (without IAM Identity Center</span>), and click <span class="Emphasis">Next</span>.</p>
                                            </li>
                                            <li>
                                                <p>Select the AWS organization from the dropdown list.</p>
                                                <div class="note">
                                                    <ul>
                                                        <li>
                                                            <p>It may take some time for the organizations to display.</p>
                                                        </li>
                                                        <li>
                                                            <p>If your organization doesn't appear, this means that it hasn't been onboarded to <MadCap:variable name="cc_product_vars.CEM-short" />. For details about onboarding the organization, see <MadCap:xref href="../CloudAdmin/cv-aws-discovery.htm#Discover">Discover a new AWS organization</MadCap:xref>.</p>
                                                        </li>
                                                        <li>
                                                            <p>A web app is created for each account in the organization.</p>
                                                        </li>
                                                    </ul>
                                                </div>
                                                <p>Click <span class="Emphasis">Continue</span>.</p>
                                            </li>
                                            <li>
                                                <p>Provide a meaningful prefix for the web apps that will be created for each account; for example <span class="Emphasis">AWS-myorg1</span>. Each  web app is named using this prefix and its 12-digit account number, separated by an underscore.</p>
                                                <p><span class="Emphasis">Example:</span><span class="Emphasis">AWS-myorg1_XXXXXXXXXXXX</span>.</p>
                                                <p><span class="Emphasis">Default prefix:</span> Amazon Web Services (AWS) Console</p>
                                            </li>
                                            <li>
                                                <p>Under <span class="Emphasis">Trust</span>, select how you want to establish trust between <MadCap:variable name="cc_product_vars.Identity-full" /> and AWS:</p>
                                                <ul>
                                                    <li>
                                                        <p><span class="Emphasis">Configure trust automatically</span> - When the web app for each account in the organization is created, <MadCap:variable name="cc_product_vars.SCA-short" /> establishes the trust for you.</p>
                                                        <div class="important">
                                                            <p>This option requires the <span class="Emphasis">iam:CreateSAMLProvider</span> in the <span class="Emphasis">CyberArkRoleSCA_{UUID}</span> role in each of your AWS IAM accounts. See <MadCap:xref href="#Before">Before you begin</MadCap:xref>. </p>
                                                        </div>
                                                    </li>
                                                    <li>
                                                        <p><span class="Emphasis">I want to configure trust manually in CyberArk Identity</span> - After the web apps are created, you manually configure trust for each web app in <MadCap:variable name="cc_product_vars.IdentityAdmin-full" />.</p>
                                                    </li>
                                                </ul>
                                            </li>
                                            <li>
                                                <p>Click <span class="Emphasis">Create</span>. A batch job is created and starts building web apps for each account in the organization.</p>
                                            </li>
                                        </ol>
                                        <div class="note">
                                            <ul>
                                                <li>
                                                    <p><MadCap:variable name="cc_product_vars.SCA-short" /> validates each account before creating a web app for it. This may take some time.</p>
                                                </li>
                                                <li>
                                                    <p>Once the web apps are created, they are listed in the Web Apps page in <MadCap:variable name="cc_product_vars.IdentityAdmin-full" />, and you can create policies.</p>
                                                </li>
                                                <li>
                                                    <p> As the batch job runs, you can monitor the status of web app creation from the <MadCap:variable name="cc_product_vars.Audit-short" /> service. Filter the events for the specific organization. The final event shows how many web apps were successfully created and how many failed, with their respective account IDs.</p>
                                                </li>
                                                <li>
                                                    <p><span class="Emphasis">Trust:</span>
                                                    </p>
                                                    <ul>
                                                        <li>
                                                            <p>If you selected the <span class="Emphasis">Configure trust automatically</span> option above, check the <span class="Emphasis">Service data</span> events in the <MadCap:variable name="cc_product_vars.Audit-short" /> service to make sure that trust was established successfully for each account. For more details, see the <a href="/audit/latest/en/content/audit/product-audits/isp-sca-audit.htm">Audit docs</a>.</p>
                                                            <p>If trust wasn't established, users with access won't be able to connect to the accounts from their <MadCap:conditionalText MadCap:conditions="SCA-conditions.not-free-trial"><MadCap:variable name="cc_C_CyberArk.CompanyName" /> user portal</MadCap:conditionalText><MadCap:conditionalText MadCap:conditions="SCA-conditions.free-trial"><MadCap:variable name="cc_product_vars.SecureAccessSpace" /> space</MadCap:conditionalText>. Follow the instructions in the audit event to resolve the issue.</p>
                                                        </li>
                                                        <li>
                                                            <p>If you selected <span class="Emphasis">I want to configure trust manually in <MadCap:variable name="cc_product_vars.Identity-full" /></span>, continue with <MadCap:xref href="#sca-configure-trust-manually">Configure trust between [%=cc_product_vars.Identity-full%] and [%=sca-project-variables.AWS-IAM%]  manually</MadCap:xref>.</p>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li>
                                                    <MadCap:snippetBlock src="SCA-snippets/ready-to-deploy.flsnp" />
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Configure trust between <MadCap:variable name="cc_product_vars.Identity-full" /> and AWS manually</span>
                                        </p>
                                        <div class="note">
                                            <p>Do this step only if you selected <span class="Emphasis">I want to configure trust manually in <MadCap:variable name="cc_product_vars.Identity-full" /></span> in the previous step. In this case, do this step for each web app that was created.</p>
                                        </div>
                                        <MadCap:snippetBlock src="../CloudAdmin/CloudAdminSnippets/aws-single-trust.flsnp">
                                        </MadCap:snippetBlock>
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Enable <MadCap:variable name="cc_product_vars.SWS-full" /> (Optional)</span>
                                        </p>
                                        <MadCap:snippetBlock src="SCA-snippets/enable-sws-intro.flsnp" />
                                        <MadCap:snippetBlock src="SCA-snippets/EnableSWS.flsnp" />
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-2">
                    <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 2 Content -Identity Admin</p>
                    <p>You can create web apps for <MadCap:variable name="sca-project-variables.AWS-IAM" /> and for <MadCap:variable name="sca-project-variables.AWS-AD" /> from <MadCap:variable name="cc_product_vars.IdentityAdmin-full" />. Each workspace type has different configuration requirements.</p>
                    <div class="tip">
                        <p>You can also create web apps in <MadCap:variable name="cc_product_vars.SCA-short" /> where you provide only the minimum details and <MadCap:variable name="cc_product_vars.SCA-short" /> provides all the rest of the details. See <MadCap:xref href="#Configur">Create a web app for an [%=sca-project-variables.AWS-IAM%] workspace</MadCap:xref>.</p>
                    </div>
                    <div class="note">
                        <p>Web apps for <MadCap:variable name="sca-project-variables.AWS-IAM" /> organizations can be added from <MadCap:variable name="cc_product_vars.SCA-short" /> only. For details, see <MadCap:xref href="#Configur">Create a web app for an [%=sca-project-variables.AWS-IAM%] workspace</MadCap:xref>.</p>
                    </div>
                    <div class="tabs">
                        <ul class="tabs-nav">
                            <li class="tab-active"><a data-cc-tab=".tab-1">AWS&#160;IAM</a>
                            </li>
                            <li><a data-cc-tab=".tab-2">AWS&#160;IAM&#160;Identity Center</a>
                            </li>
                        </ul>
                        <div class="tabs-stage">
                            <div class="tab-1">
                                <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 1 Content - &lt;AWS&#160;IAM&gt;</p>
                                <div class="note">
                                    <p>If you want to provide user access to multiple AWS&#160;IAM accounts (even when they belong to the same organization), you have to create a separate web app in the portal for each account.</p>
                                </div>
                                <ol>
                                    <li>
                                        <div class="ProcedureHeading">Add the AWS&#160;console as a web app</div>
                                        <MadCap:snippetBlock src="SCA-snippets/AWS-WebApp-Step1.flsnp" MadCap:conditionTagExpression="exclude[snip-conditions.AWS-IAM-IDC]" />
                                    </li>
                                    <li>
                                        <p class="ProcedureHeading">Specify the AWS application settings</p>
                                        <p>In  the <span class="Emphasis">Application Settings</span> tab, enter your <span class="Emphasis"> AWS Account ID</span>, then click <span class="Emphasis">Save</span>.</p>
                                        <div class="note">
                                            <ul>
                                                <li>
                                                    <p>To find your AWS Account ID, sign in to the AWS console with an admin user, then click <span class="Emphasis">&lt;Username&gt;</span> &gt; <span class="Emphasis">My Account</span>. The Account ID&#160;is displayed under Account Settings.</p>
                                                </li>
                                                <li>
                                                    <MadCap:snippetBlock src="SCA-snippets/ready-to-deploy.flsnp" />
                                                </li>
                                            </ul>
                                        </div>
                                    </li>
                                    <li>
                                        <p class="ProcedureHeading"><a name="aws-single-trust"></a>Configure <MadCap:variable name="cc_product_vars.Identity-full" /> as the IdP</p>
                                        <MadCap:snippetBlock src="../CloudAdmin/CloudAdminSnippets/aws-single-trust.flsnp" />
                                    </li>
                                </ol>
                            </div>
                            <div class="tab-2">
                                <p MadCap:conditions="cc_C_CyberArk.InternalOnly">Tab 2 Content - &lt;AWS&#160;IAM&#160;IDC&gt;</p>
                                <ol>
                                    <li><span class="Emphasis">Add the AWS console as a web app</span>
                                        <MadCap:snippetBlock src="SCA-snippets/AWS-WebApp-Step1.flsnp" MadCap:conditionTagExpression="exclude[snip-conditions.AWS-IAM]" />
                                    </li>
                                    <li>
                                        <p><span class="Emphasis">Specify the AWS application settings</span>
                                        </p>
                                        <p>When an <MadCap:variable name="cc_product_vars.SCA-short" /> policy is created to provide access to an AWS IAM&#160;Identity Center workspace, users are provisioned via a custom role that is created for each AWS web app. You must create this custom role in <MadCap:variable name="cc_product_vars.IdentityAdmin-full" /> for the users to assume.</p>
                                        <div class="important">
                                            <p>Users must either be created directly in AWS&#160;IAM&#160;Identity Center, or provisioned from <MadCap:variable name="cc_product_vars.Identity-full" /> or another IdP. For information on how to provision users in AWS, see the <a href="https://docs.aws.amazon.com/singlesignon/latest/userguide/scim-profile-saml.html" target="_blank" alt="link to AWS documentation on automatic and manual user provisioning">AWS&#160;docs</a>.</p>
                                        </div>
                                        <p>Additionally, you should verify that the web app is configured correctly for <MadCap:variable name="cc_product_vars.SCA-short" />.</p>
                                        <ol>
                                            <li>
                                                <p>In <span class="Emphasis">Core Services </span>&gt; <span class="Emphasis">Roles</span>, create a custom role in the format <span class="Emphasis">AWS_SCA_&lt;management account ID&gt;</span>. For example, <span class="Emphasis">AWS_SCA_1111111</span>.</p>
                                                <div class="note">
                                                    <ul>
                                                        <li>
                                                            <p>Create a new custom role for each AWS IAM&#160;Identity Center web app.</p>
                                                        </li>
                                                        <li>
                                                            <p>For details on how to add a custom role, see the <a href="/identity/latest/en/content/coreservices/getstarted/create-roles.htm" target="_blank" alt="[%=cc_product_vars.Identity-full%] topic on how to create custom roles"><MadCap:variable name="cc_product_vars.Identity-full" /> docs</a>.</p>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </li>
                                            <li>
                                                <p>In the <span class="Emphasis">Secure Cloud Access </span>tab, select <span class="Emphasis">Enable Secure Cloud Access</span></p>
                                            </li>
                                            <li>
                                                <p>If you want to use <MadCap:variable name="cc_product_vars.Identity-full" /> as the third-party IdP, select <span class="Emphasis"><MadCap:variable name="cc_C_CyberArk.CompanyName" /> as the IDP</span>.</p>
                                            </li>
                                            <li>
                                                <p>In the <span class="Emphasis">Settings </span>tab, enter the <span class="Emphasis">AWS Account ID </span>for the management account.</p>
                                                <div class="note">
                                                    <p>When adding an AWS IAM Identity Center organization, you must use the management account ID&#160;for the web app.</p>
                                                </div>
                                            </li>
                                            <li>
                                                <p>Save the updated web app settings.</p>
                                                <div class="note">
                                                    <MadCap:snippetBlock src="SCA-snippets/ready-to-deploy.flsnp" />
                                                </div>
                                            </li>
                                        </ol>
                                    </li>
                                    <li>
                                        <p><a name="aws-idc-trust"></a><span class="Emphasis">Configure  the IdP</span>
                                        </p>
                                        <div class="note">
                                            <p>This step is required only if you use <MadCap:variable name="cc_product_vars.Identity-full" /> as your IdP.</p>
                                            <p>If you are using AWS&#160;IAM&#160;Identity Center and already have a third-party IdP configured in AWS, by default <MadCap:variable name="cc_product_vars.SCA-short" /> supports user authentication via your IdP and applying <MadCap:variable name="cc_product_vars.SCA-short" /> policies for these users to provide zero standing permissions. There is no need for additional configuration.</p>
                                        </div>
                                        <MadCap:snippetBlock src="SCA-snippets/AWS-idc-trust.flsnp" />
                                    </li>
                                    <li>
                                        <p class="ProcedureHeading">Enable <MadCap:variable name="cc_product_vars.SWS-short" /> (optional)</p>
                                        <MadCap:snippetBlock src="SCA-snippets/enable-sws-intro.flsnp" />
                                        <MadCap:snippetBlock src="SCA-snippets/EnableSWS.flsnp" />
                                    </li>
                                </ol>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="NextStep">
            <p>
                <MadCap:xref href="sca_create-policies-AWS.htm">Create policies for [%=sca-project-variables.AWS-IAM%] and [%=sca-project-variables.AWS-AD%] access</MadCap:xref>
            </p>
        </div>
    </body>
</html>